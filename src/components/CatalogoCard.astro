---
import BaseCard from './BaseCard.astro';

export interface Props {
	titulo?: string;
	catalogo: any[];
}

const { titulo = 'Catálogo completo de experiencias', catalogo = [] } = Astro.props;

// Transformar el catálogo al formato esperado por BaseCard
const catalogoItems = catalogo.map((item) => ({
  title: item.data.title,
  description: item.data.descripcion,
  image: item.data.img,
  categoria: item.data.categoria,
  duracion: item.data.duracion,
  precio: item.data.precio,
  moneda: item.data.moneda,
  destacado: item.data.destacado,
  tipo: item.data.tipo,
  link: item.data.categoria === 'tours' ? `/tours/paquetes/${item.slug}` :
        item.data.categoria === 'excursiones' ? `/excursiones/paquetes/${item.slug}` :
        item.data.tipo === 'apartamento' ? `/alojamiento/apartamento/${item.slug}` :
        item.data.tipo === 'casa-en-el-campo' ? `/alojamiento/casa-en-el-campo/${item.slug}` :
        item.data.tipo === 'casa-en-la-playa' ? `/alojamiento/casa-en-la-playa/${item.slug}` :
        item.data.tipo === 'servicio' ? `/servicios/${item.slug}` :
        '#'
}));
---

<BaseCard 
  sectionSubtitle={titulo}
  cardType="catalog"
  items={catalogoItems}
  showImages={true}
  showBadges={true}
  showMetadata={true}
  columnsLg={3}
  columnsMd={2}
  columnsSm={1}
/>
