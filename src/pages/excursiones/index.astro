---
import DefaultLayout from "../../layouts/DefaultLayout.astro";
import PaquetesCard from "../../components/PaquetesCard.astro";
import HeaderStart from "../../components/HeaderStart.astro";
import { getCollection } from "astro:content";
import { getWhatsAppUrl } from "../../utils/whatsapp.ts";
import FeatureStar from "../../components/FeatureStar.astro";
import IconWhatsapp from "../../components/IconWhatsapp.astro";

const excursionesIndividuales = await getCollection("excursiones");

const page = "Excursiones Cuba";
const image = "/img/varadero.jpg";
---

<DefaultLayout 
  title="Excursiones Cuba - Viñales, Soroa, Cayos y Aventura Natural"
  description="Excursiones aventura en Cuba: Valle de Viñales, cascadas Soroa, cayos vírgenes, naturaleza exuberante. Ecoturismo y aventura con guías especializados."
>
  <HeaderStart page={page} image={image} />

  <!-- Excursiones Individuales -->
  {excursionesIndividuales.length > 0 && (
    <div class="container py-5">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2 class="h3 text-dark mb-2">Excursiones Individuales</h2>
          <p class="text-muted">Aventuras naturales con guías especializados</p>
        </div>
      </div>
      <div class="row g-4 justify-content-center">
        {excursionesIndividuales.map((excursion) => (
          <div class="col-lg-4 col-md-6">
            <div class="card border-0 shadow-sm h-100">
              <img src={excursion.data.img} class="card-img-top" alt={excursion.data.title} style="object-fit:cover;height:200px;" />
              <div class="card-body d-flex flex-column p-4">
                <h5 class="card-title">{excursion.data.title}</h5>
                <p class="card-text flex-grow-1 text-muted">{excursion.data.descripcion}</p>
                <div class="mb-3">
                  <small class="text-muted">
                    <span class="material-symbols-outlined me-1" style="font-size: 16px;">schedule</span> {excursion.data.duracion}
                  </small>
                  {excursion.data.categoria && (
                    <small class="text-muted ms-3">
                      <span class="material-symbols-outlined me-1" style="font-size: 16px;">label</span> {excursion.data.categoria}
                    </small>
                  )}
                </div>
                <div class="d-flex gap-2">
                  <a href={`/excursiones/individuales/${excursion.slug}`} class="btn btn-success flex-grow-1">
                    Ver detalles
                  </a>
                  <a href={getWhatsAppUrl('excursiones', excursion.data.title)} class="btn btn-success" target="_blank" rel="noopener noreferrer">
                    <IconWhatsapp style="width: 20px; height: 20px;" />
                  </a>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  )}

  <!-- Sección de Paquetes -->
  <PaquetesCard
    titulo="Paquetes Excursiones Cuba"
    subtitulo="Excursiones Viñales, Soroa, Cayos y Aventura Natural"
    ruta="/excursiones/paquetes"
    icono="fa fa-mountain"
    descripcion="Paquetes de excursiones por la naturaleza cubana: Valle de Viñales, cascadas de Soroa, cayos vírgenes y aventuras eco-turísticas. Descubre la Cuba natural con guías especializados."
  />
  <FeatureStar />
</DefaultLayout>
