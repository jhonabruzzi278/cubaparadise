---
import DefaultLayout from "../../layouts/DefaultLayout.astro";

import PaquetesCard from "../../components/PaquetesCard.astro";
import HeaderStart from "../../components/HeaderStart.astro";
import FeatureStar from "../../components/FeatureStar.astro";
import { getCollection } from "astro:content";
import { getWhatsAppUrl } from "../../utils/whatsapp.ts";
import IconWhatsapp from "../../components/IconWhatsapp.astro";

const toursIndividuales = await getCollection("tours");

const page = "Tours Cuba";
const image = "/img/playasdeleste.jpg";
---

<DefaultLayout 
  title="Tours Cuba - La Habana, Trinidad, Viñales con Guías Locales"
  description="Tours guiados en Cuba: La Habana Vieja, Trinidad colonial, Valle Viñales, cayos paradisíacos. Guías locales expertos y experiencias auténticas."
>
  <HeaderStart page={page} image={image} />

  <!-- Tours Individuales -->
  {toursIndividuales.length > 0 && (
    <div class="container py-5">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2 class="h3 text-dark mb-2">Tours Individuales</h2>
          <p class="text-muted">Experiencias específicas con guías especializados</p>
        </div>
      </div>
      <div class="row g-4 justify-content-center">
        {toursIndividuales.map((tour) => (
          <div class="col-lg-4 col-md-6">
            <div class="card border-0 shadow-sm h-100">
              <img src={tour.data.img} class="card-img-top" alt={tour.data.title} style="object-fit:cover;height:200px;" />
              <div class="card-body d-flex flex-column p-4">
                <h5 class="card-title">{tour.data.title}</h5>
                <p class="card-text flex-grow-1 text-muted">{tour.data.descripcion}</p>
                <div class="mb-3">
                  <small class="text-muted">
                    <span class="material-symbols-outlined me-1" style="font-size: 16px;">schedule</span> {tour.data.duracion}
                  </small>
                  {tour.data.categoria && (
                    <small class="text-muted ms-3">
                      <span class="material-symbols-outlined me-1" style="font-size: 16px;">label</span> {tour.data.categoria}
                    </small>
                  )}
                </div>
                <div class="d-flex gap-2">
                  <a href={`/tours/individuales/${tour.id.split('/')[1]?.replace('.md', '') || tour.slug}`} class="btn btn-primary flex-grow-1">
                    Ver detalles
                  </a>
                  <a href={getWhatsAppUrl('tours', tour.data.title)} class="btn btn-success" target="_blank" rel="noopener noreferrer">
                    <IconWhatsapp style="width: 20px; height: 20px;" />
                  </a>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  )}

  <PaquetesCard
    titulo="Paquetes Tours Cuba"
    subtitulo="Tours La Habana, Trinidad, Viñales y más destinos"
    ruta="/tours/paquetes"
    icono="fa fa-suitcase-rolling"
    descripcion="Tours por Cuba con guías locales: La Habana histórica, Trinidad colonial, Viñales natural y cayos paradisíacos. Cultura, historia, naturaleza y diversión en experiencias únicas."
  />

  
</DefaultLayout>
